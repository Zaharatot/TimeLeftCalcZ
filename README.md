# TimeLeftCalcZ

Данный проект был создан в виде отдельной библиотеке по одной простой причине - чтобы можно было легко брать его, и встраивать в другие проекты. А при необходимости, можно просто скопировать основной класс в свой проект, или же - вообще сделать свою реализацию алгоритма. Данная библиотека выполняет примерный подсчёт оставшегося времени для выполнения длительных действий, разбитых на несколько итераций.

Сам проект создан и опубликован был по одной простой причине - я сам до этого использовал для подобного расчёта простое нахождение среднего от прошлого вычесленного времени и времени новой итерации. Но - мой подход имел одну большую проблему: расчётное время могло сильно скакать, каие бы я не вводил ограничители (на одной итерации показывает 40 минут, на другой - 27, а на следующей - уже снова 40). Я полез искать советы по данному вопросу, но с удивлением обнаружил, что подобных вопросов имеется очень много, а вот внятных ответов на них - почти нет. Забегая вперёд - один из ответов я и использовал для своей реализации, но принял я его только после некоторых экспериментов. А именно - вывел в тублицу тестовые значения для времени итераций с большим разбросом, и начал смотреть по шагам, где у меня находится источник разброса по времени. И - он оказался именно в расчёте среднего. После ещё пары тестов, я пришёл к идеальному значению для буфера в 10 итераций.

Сама схема алгоритма следующая:
- Добавляем время итерации в буфер
- Если буфер больше лимита - удаляем первый элемент
- Получаем среднее время итерации в буфере
- Умножаем его на количество оставшихся итераций

Для использования библиотеки, необходимо подключить её к проекту, и инициализировать класс "TimeLeftCalc", передав в него (при необходимости) значение для размера буфера. Затем, необходимо выполнить метод запуска подсчёта (сбрасывает буфер и внутренние счётчики), с передачей в него общего количества итераций. После этого, нужно на каждой итерации вызывать метод "AddIteration" (по завершению итерации), с передачей в него номера итерации (считать с ноля) и её длительности. После этого, метод "GetTimeLeft" вернёт оставшееся время. Для более наглядного показа, к решению прикреплён проект "TimeLeftCalcTest", в котором наглядно показывается расчёт времени.
